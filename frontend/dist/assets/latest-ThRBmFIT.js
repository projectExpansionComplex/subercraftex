import{q as Y,u as H,a as y,r as l,j as e,h as c,b as n}from"./index-DuCqjSN_.js";import{f as N}from"./format-SmSpYad1.js";var d,v;function O(){return v||(v=1,d=new Proxy({},{get:(r,t)=>{if(t==="__esModule")return{};throw new Error(`You're trying to import \`@heroicons/react/solid/${t}\` from Heroicons v1 but have installed Heroicons v2. Install \`@heroicons/react@v1\` to resolve this error.`)}})),d}var w=O();const K=()=>{const{designerUid:i}=Y(),r=H(),{auth_token:t,current_user:X}=y(s=>s.auth),{currency:m}=y(s=>s.preferences),[o,x]=l.useState(null),[S,D]=l.useState([]),[C,P]=l.useState([]),[k,F]=l.useState([]),[$,M]=l.useState([]),[h,A]=l.useState(!1),[I,U]=l.useState(""),[g,V]=l.useState([]),[_,u]=l.useState(!0),[j,p]=l.useState(null);l.useEffect(()=>{(async()=>{u(!0),p(null);try{const a=await c.get(`http://localhost:1337/api/designers/${i}`,{headers:{Authorization:`Bearer ${t}`}});x(a.data.designer),D(a.data.portfolio),P(a.data.products),F(a.data.reviews),M(a.data.notableProjects)}catch{p("Failed to load designer data. Please try again later."),r(n({id:Date.now().toString(),type:"error",message:"Failed to load designer data."}))}finally{u(!1)}})()},[i,t,r]);const z=(s="")=>{A(!h),U(s)},B=s=>{console.log(`Navigating to portfolio item: ${s}`)},E=s=>{console.log(`Navigating to product: ${s}`)},f=async()=>{try{const s=await c.get(`http://localhost:1337/api/designers/${i}/consultation-slots`,{headers:{Authorization:`Bearer ${t}`}});V(s.data)}catch{r(n({id:Date.now().toString(),type:"error",message:"Failed to fetch consultation slots. Please try again."}))}},R=async s=>{try{await c.post("http://localhost:1337/api/consultations",{designerUid:i,slotId:s},{headers:{Authorization:`Bearer ${t}`}}),r(n({id:Date.now().toString(),type:"success",message:"Consultation booked successfully."})),f()}catch{r(n({id:Date.now().toString(),type:"error",message:"Failed to book consultation. Please try again."}))}},L=async()=>{try{await c.post(`http://localhost:1337/api/designers/${i}/follow`,{},{headers:{Authorization:`Bearer ${t}`}}),r(n({id:Date.now().toString(),type:"success",message:"You are now following this designer."})),x(s=>({...s,isFollowed:!0}))}catch{r(n({id:Date.now().toString(),type:"error",message:"Failed to follow designer. Please try again."}))}},q=async()=>{try{const s=await c.post("http://localhost:1337/api/chats",{recipientUid:i},{headers:{Authorization:`Bearer ${t}`}});console.log(`Navigating to chat session: ${s.data.chatUid}`)}catch{r(n({id:Date.now().toString(),type:"error",message:"Failed to start chat. Please try again."}))}};return _?e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):j?e.jsx("div",{className:"text-red-500 text-center",children:j}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:o.coverImageUrl,alt:"Cover",className:"w-full h-64 object-cover rounded-lg"}),e.jsx("img",{src:o.profileImageUrl,alt:o.name,className:"absolute bottom-0 left-8 -mb-16 w-32 h-32 rounded-full border-4 border-white"})]}),e.jsxs("div",{className:"mt-20 sm:flex sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:o.name}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:o.location})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:t&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:L,className:"mr-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:o.isFollowed?"Following":"Follow"}),e.jsx("button",{onClick:q,className:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded",children:"Message"})]})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"About"}),e.jsx("p",{className:"mt-4 text-gray-600",children:o.bio}),e.jsx("div",{className:"mt-4 flex flex-wrap",children:o.specialties.map((s,a)=>e.jsx("span",{className:"mr-2 mb-2 px-3 py-1 bg-gray-200 rounded-full text-sm text-gray-700",children:s},a))})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Portfolio"}),e.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(s=>e.jsxs("div",{className:"relative group",onClick:()=>B(s.uid),children:[e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-64 object-cover rounded-lg"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center rounded-lg",children:e.jsx("p",{className:"text-white text-center font-bold",children:s.title})})]},s.uid))})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Shop"}),e.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:C.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",onClick:()=>E(s.uid),children:[e.jsx("img",{src:s.thumbnailUrl,alt:s.title,className:"w-full h-48 object-cover rounded-lg"}),e.jsx("h3",{className:"mt-2 text-lg font-semibold",children:s.title}),e.jsx("p",{className:"text-gray-600",children:new Intl.NumberFormat(m,{style:"currency",currency:m}).format(s.price)})]},s.uid))})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Reviews"}),e.jsx("div",{className:"mt-4",children:k.map(s=>e.jsxs("div",{className:"border-b pb-4 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:s.userAvatar,alt:s.userName,className:"w-10 h-10 rounded-full mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.userName}),e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((a,b)=>e.jsx(w.StarIcon,{className:`h-5 w-5 ${b<s.rating?"text-yellow-400":"text-gray-300"}`},b))})]})]}),e.jsx("p",{className:"mt-2 text-gray-600",children:s.comment}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:N(new Date(s.createdAt),"MMMM d, yyyy")})]},s.uid))}),t&&e.jsx("div",{className:"mt-4",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Leave a Review"})})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Notable Projects"}),e.jsx("div",{className:"mt-4 space-y-8",children:$.map((s,a)=>e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full md:w-1/3 h-48 object-cover rounded-lg"}),e.jsxs("div",{className:"mt-4 md:mt-0 md:ml-6 flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold",children:s.title}),e.jsx("p",{className:"mt-2 text-gray-600",children:s.description}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Year: ",s.year]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Collaborators: "}),s.collaborators.join(", ")]})]})]},a))})]}),t&&e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Book a Consultation"}),e.jsx("button",{onClick:f,className:"mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:"View Available Slots"}),g.length>0&&e.jsx("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:g.map(s=>e.jsxs("button",{onClick:()=>R(s.id),className:"bg-white border border-gray-300 rounded-lg py-2 px-4 hover:bg-gray-50",children:[N(new Date(s.date),"MMM d, yyyy")," at ",s.time]},s.id))})]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 w-full max-w-3xl",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>z(),className:"text-gray-500 hover:text-gray-700",children:e.jsx(w.XIcon,{className:"h-6 w-6"})})}),e.jsx("div",{className:"mt-4",children:e.jsx("video",{src:I,controls:!0,className:"w-full"})})]})})]})};export{K as default};
