import{u as A,a as C,r as t,h as R,j as e,L as F,t as $,o as B}from"./index-D2GD3Ky5.js";import{l as k}from"./lodash-cjLjRAtC.js";import{B as i}from"./button-DkCzGDiL.js";import{I as T}from"./input-C4wLjluH.js";import{C as Q}from"./checkbox-Dk55Rhym.js";import{S as G,a as X,b as H,c as J,d as g}from"./select-CIix-js0.js";import{S as K}from"./slider-DXS6N06W.js";import{T as M,a as U,b as f,c as W}from"./tabs-D2yfnHbp.js";import{P as Y}from"./progress-D7LuSZAw.js";import{X as Z}from"./x-BcquClZZ.js";import{S as q}from"./search-DYTRgkLu.js";import"./utils-RBxwfoyS.js";import"./clsx-B-dksMZM.js";import"./index-DG9IbPYk.js";import"./index-C4b4fDol.js";import"./index-B-o7OVwB.js";import"./index-bOXxJ8Ap.js";import"./index-CKts21x4.js";import"./index-bMDP0wTq.js";import"./index-nF-sxMqU.js";import"./tslib.es6-B8roaPp9.js";import"./chevron-down-BUOScESS.js";const Ne=()=>{const j=A();C(s=>s.ui.language);const b=C(s=>s.search.recent_searches),[c,n]=t.useState(""),[r,v]=t.useState({categories:[],location:"",priceRange:{min:0,max:1e3}}),[o,S]=t.useState("relevance"),[E,m]=t.useState({designs:[],designers:[],products:[]}),[I,h]=t.useState(!1),[N,w]=t.useState([]),[L,V]=t.useState("designs"),x=t.useRef(null),p=t.useCallback(k.debounce(async(s,a,l)=>{if(s.length<2){m({designs:[],designers:[],products:[]});return}h(!0);try{const u=await R.get("http://localhost:1337/api/search",{params:{query:s,...a,sort:l}});m(u.data),h(!1)}catch(u){console.error("Search error:",u),h(!1)}},300),[]),y=t.useCallback(k.debounce(async s=>{if(s.length<2){w([]);return}try{const a=await R.get("http://localhost:1337/api/search/autocomplete",{params:{query:s}});w(a.data)}catch(a){console.error("Autocomplete error:",a)}},150),[]);t.useEffect(()=>{p(c,r,o)},[c,r,o,p]),t.useEffect(()=>{y(c)},[c,y]),t.useEffect(()=>{x.current&&x.current.focus()},[]);const _=s=>{n(s.target.value)},d=(s,a)=>{v(l=>({...l,[s]:a}))},z=s=>{S(s)},D=()=>{n(""),v({categories:[],location:"",priceRange:{min:0,max:1e3}}),S("relevance"),m({designs:[],designers:[],products:[]})},O=()=>{j($())},P=s=>{s.preventDefault(),c&&(j(B(c)),p(c,r,o))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-start overflow-y-auto",children:e.jsxs("div",{className:"bg-white w-full max-w-4xl mt-20 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-purple-900",children:"Search"}),e.jsx(i,{variant:"ghost",size:"icon",onClick:O,children:e.jsx(Z,{className:"h-6 w-6"})})]}),b.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-600",children:"Recent Searches"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((s,a)=>e.jsx(i,{variant:"outline",size:"sm",onClick:()=>n(s),children:s},a))})]}),e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(T,{ref:x,type:"text",value:c,onChange:_,placeholder:"Search designs, designers, or products...",className:"pr-10"}),e.jsx(i,{type:"submit",size:"icon",className:"absolute right-0 top-0",children:e.jsx(q,{className:"h-4 w-4"})})]}),N.length>0&&e.jsx("ul",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-60 overflow-auto",children:N.map((s,a)=>e.jsx("li",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>n(s),children:s},a))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categories"}),e.jsx("div",{className:"space-y-2",children:["woodworking","apparel","web-design","automotive"].map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{id:s,checked:r.categories.includes(s),onCheckedChange:a=>{a?d("categories",[...r.categories,s]):d("categories",r.categories.filter(l=>l!==s))}}),e.jsx("label",{htmlFor:s,className:"ml-2 text-sm text-gray-700",children:s})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsx(T,{type:"text",value:r.location,onChange:s=>d("location",s.target.value),placeholder:"Enter location"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Range"}),e.jsx(K,{defaultValue:[r.priceRange.min,r.priceRange.max],max:1e3,step:10,onValueChange:s=>d("priceRange",{min:s[0],max:s[1]})}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["$",r.priceRange.min]}),e.jsxs("span",{children:["$",r.priceRange.max]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs(G,{value:o,onValueChange:z,children:[e.jsx(X,{className:"w-[180px]",children:e.jsx(H,{placeholder:"Sort by"})}),e.jsxs(J,{children:[e.jsx(g,{value:"relevance",children:"Relevance"}),e.jsx(g,{value:"date",children:"Date"}),e.jsx(g,{value:"popularity",children:"Popularity"})]})]}),e.jsx(i,{type:"submit",className:"bg-blue-500 text-white",children:"Search"})]})]}),I?e.jsx(Y,{value:33,className:"w-full mt-4"}):e.jsxs(M,{value:L,onValueChange:V,className:"mt-8",children:[e.jsxs(U,{className:"grid w-full grid-cols-3",children:[e.jsx(f,{value:"designs",children:"Designs"}),e.jsx(f,{value:"designers",children:"Designers"}),e.jsx(f,{value:"products",children:"Products"})]}),Object.entries(E).map(([s,a])=>e.jsx(W,{value:s,children:a.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(l=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsx(F,{to:`/${s.slice(0,-1)}/${l.id}`,className:"text-blue-600 hover:text-blue-800 font-semibold",children:l.title||l.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:l.description})]},l.id))}):e.jsxs("p",{className:"text-gray-500 text-center py-4",children:["No results found for ",s]})},s))]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx(i,{variant:"outline",onClick:D,children:"Clear Search"})})]})})};export{Ne as default};
