import{u as B,r as o,a as M,j as e,L as P,l as G,b as p,c as O,s as V}from"./index-D2GD3Ky5.js";import{F as S,a as C,b as A,c as z}from"./index-Rydgc-nj.js";import{B as f}from"./button-DkCzGDiL.js";import{I as n}from"./input-C4wLjluH.js";import{L as i}from"./label-D5GyjnFX.js";import{C as U}from"./checkbox-Dk55Rhym.js";import{P as J}from"./progress-D7LuSZAw.js";import{T as W,a as X,b as k,c as L}from"./tabs-D2yfnHbp.js";import{R as $,a as j}from"./radio-group-whEJ-4Cw.js";import{X as H}from"./x-BcquClZZ.js";import"./utils-RBxwfoyS.js";import"./clsx-B-dksMZM.js";import"./index-DG9IbPYk.js";import"./index-C4b4fDol.js";import"./index-B-o7OVwB.js";import"./index-bOXxJ8Ap.js";import"./index-CKts21x4.js";import"./index-bMDP0wTq.js";const he=()=>{const m=B(),[T,u]=o.useState(!0),[N,E]=o.useState("login"),[l,g]=o.useState({email:"",password:"",rememberMe:!1}),[a,c]=o.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",userType:"individual"}),[d,v]=o.useState(!1),[x,h]=o.useState(!1),[r,R]=o.useState({}),[I,w]=o.useState(0),{auth_token:b}=M(s=>s.auth);o.useEffect(()=>{b&&u(!1)},[b]),o.useEffect(()=>{if(x){const s=setInterval(()=>{w(t=>t>=100?(clearInterval(s),100):t+10)},200);return()=>clearInterval(s)}else w(0)},[x]);const y=s=>{const t={};return s==="login"?(l.email||(t.email="Email is required"),l.password||(t.password="Password is required")):(a.firstName||(t.firstName="First name is required"),a.lastName||(t.lastName="Last name is required"),a.email||(t.email="Email is required"),a.password||(t.password="Password is required"),a.password!==a.confirmPassword&&(t.confirmPassword="Passwords do not match")),R(t),Object.keys(t).length===0},D=async s=>{if(s.preventDefault(),!!y("login")){h(!0);try{m(G({email:l.email,password:l.password})),m(p({id:Date.now().toString(),type:"success",message:"Login successful!"})),u(!1)}catch{m(p({id:Date.now().toString(),type:"error",message:"Login failed. Please check your credentials."}))}finally{h(!1)}}},_=async s=>{if(s.preventDefault(),!!y("register")){h(!0);try{const t=await O.post("/api/users/register",{first_name:a.firstName,last_name:a.lastName,email:a.email,password:a.password,user_type:a.userType});console.log(t,"this is response data in form registration"),m(V(t.data)),m(p({id:Date.now().toString(),type:"success",message:"Registration successful!"})),u(!1)}catch{m(p({id:Date.now().toString(),type:"error",message:"Registration failed. Please try again."}))}finally{h(!1)}}},F=s=>{console.log(`Social login with ${s}`)},q=()=>{console.log("Forgot password")};return T?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"overflow-auto  bg-white rounded-xl shadow-2xl w-full max-w-md p-8 relative",children:[e.jsx(J,{value:I,className:"authProgress absolute top-0 left-0 right-0 h-1"}),e.jsx("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:e.jsx(H,{size:24})}),e.jsx("h2",{className:"text-3xl font-bold text-center mb-6 font-serif text-purple-800",children:N==="login"?"Welcome Back":"Join Us"}),e.jsxs(W,{defaultValue:N,onValueChange:s=>E(s),children:[e.jsxs(X,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(k,{value:"login",children:"Login"}),e.jsx(k,{value:"register",children:"Register"})]}),e.jsx(L,{value:"login",className:"formContainer",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(n,{type:"email",id:"email",value:l.email,onChange:s=>g({...l,email:s.target.value}),className:r.email?"border-red-500":""}),r.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.email})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{type:d?"text":"password",id:"password",value:l.password,onChange:s=>g({...l,password:s.target.value}),className:r.password?"border-red-500":""}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>v(!d),children:d?e.jsx(S,{}):e.jsx(C,{})})]}),r.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.password})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{id:"rememberMe",checked:l.rememberMe,onCheckedChange:s=>g({...l,rememberMe:s})}),e.jsx(i,{htmlFor:"rememberMe",className:"ml-2",children:"Remember me"})]}),e.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:underline",onClick:q,children:"Forgot Password?"})]}),e.jsx(f,{type:"submit",className:"w-full",disabled:x,children:x?"Logging in...":"Login"})]})}),e.jsx(L,{value:"register",className:"formContainer",children:e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"firstName",children:"First Name"}),e.jsx(n,{type:"text",id:"firstName",value:a.firstName,onChange:s=>c({...a,firstName:s.target.value}),className:r.firstName?"border-red-500":""}),r.firstName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.firstName})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"lastName",children:"Last Name"}),e.jsx(n,{type:"text",id:"lastName",value:a.lastName,onChange:s=>c({...a,lastName:s.target.value}),className:r.lastName?"border-red-500":""}),r.lastName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.lastName})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"registerEmail",children:"Email"}),e.jsx(n,{type:"email",id:"registerEmail",value:a.email,onChange:s=>c({...a,email:s.target.value}),className:r.email?"border-red-500":""}),r.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.email})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"registerPassword",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{type:d?"text":"password",id:"registerPassword",value:a.password,onChange:s=>c({...a,password:s.target.value}),className:r.password?"border-red-500":""}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>v(!d),children:d?e.jsx(S,{}):e.jsx(C,{})})]}),r.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.password})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(n,{type:"password",id:"confirmPassword",value:a.confirmPassword,onChange:s=>c({...a,confirmPassword:s.target.value}),className:r.confirmPassword?"border-red-500":""}),r.confirmPassword&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.confirmPassword})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"userType",children:"User Type"}),e.jsxs($,{value:a.userType,onValueChange:s=>c({...a,userType:s}),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"individual",id:"individual"}),e.jsx(i,{htmlFor:"individual",children:"Individual"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"designer",id:"designer"}),e.jsx(i,{htmlFor:"designer",children:"Designer/Artisan"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"business",id:"business"}),e.jsx(i,{htmlFor:"business",children:"Business"})]})]})]}),e.jsx(f,{type:"submit",className:"w-full",disabled:x,children:x?"Registering...":"Register"})]})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-center text-sm text-gray-600 mb-4",children:"Or continue with"}),e.jsxs("div",{className:"flex justify-center space-x-4 socialButton",children:[e.jsxs(f,{onClick:()=>F("google"),variant:"outline",className:"flex items-center justify-center",children:[e.jsx(A,{className:"mr-2"})," Google"]}),e.jsxs(f,{onClick:()=>F("facebook"),variant:"outline",className:"flex items-center justify-center",children:[e.jsx(z,{className:"mr-2"})," Facebook"]})]})]}),e.jsxs("p",{className:"mt-6 text-center text-xs text-gray-500",children:["By continuing, you agree to our"," ",e.jsx(P,{to:"/terms",className:"text-blue-600 hover:underline",children:"Terms of Service"})," ","and"," ",e.jsx(P,{to:"/privacy",className:"text-blue-600 hover:underline",children:"Privacy Policy"}),"."]})]})}):null};export{he as default};
