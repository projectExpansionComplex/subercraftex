import{d as K,u as O,a as P,r as t,h as c,b as o,j as e}from"./index-DuCqjSN_.js";import{l as X}from"./lodash-QbhainP2.js";import{B as n}from"./button-WgoBpstD.js";import{I as f}from"./input-pQHlcQ7V.js";import{B as L}from"./badge-DLldWoGU.js";import{S as _,a as T,b as E,c as D,d as p}from"./select-Bihb5Gi_.js";import{P as Y,a as Z,b as v,c as ee,d as se,e as ae}from"./pagination-BYmwyNP_.js";import{S as te}from"./search-BLdh8568.js";import{S as re}from"./star-DOKKDdMK.js";import"./utils-bp6eTVW9.js";import"./clsx-B-dksMZM.js";import"./index-Rc2U_xE8.js";import"./index-WcrWcI-o.js";import"./index-DShn9APq.js";import"./index-Ds5EbOBP.js";import"./tslib.es6-Cwz2ACWT.js";import"./index-DRx4Dmjp.js";import"./index-C0VCPdqo.js";import"./chevron-down-D5wGe5Fx.js";import"./chevron-left-SOwOTbK_.js";import"./chevron-right-CX_9zj3K.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ie=K("CirclePlus",le),_e=()=>{const l=O(),{current_user:m}=P(s=>s.auth),{language:ce,theme:F}=P(s=>s.preferences),[I,A]=t.useState([]),[$,B]=t.useState([]),[R,M]=t.useState([]),[h,b]=t.useState("all"),[x,k]=t.useState("all"),[i,u]=t.useState(1),[N,V]=t.useState(1),[z,w]=t.useState(!1),[j,U]=t.useState(""),[r,S]=t.useState(null),g=t.useCallback(async()=>{w(!0);try{const s=await c.get("http://localhost:1337/api/educational-resources",{params:{category:h!=="all"?h:void 0,skill_level:x!=="all"?x:void 0,page:i,limit:12,search:j}});A(s.data.resources),V(Math.ceil(s.data.total_count/12))}catch(s){console.error("Error fetching tutorials:",s),l(o({id:Date.now().toString(),type:"error",message:"Failed to load tutorials. Please try again."}))}finally{w(!1)}},[h,x,i,j,l]),C=X.debounce(g,300);t.useEffect(()=>{C()},[C]),t.useEffect(()=>{(async()=>{try{const[a,d]=await Promise.all([c.get("http://localhost:1337/api/tutorial-categories"),c.get("http://localhost:1337/api/skill-levels")]);B(a.data),M(d.data)}catch(a){console.error("Error fetching categories and skill levels:",a)}})()},[]);const q=s=>{b(s),u(1)},Q=s=>{k(s),u(1)},y=s=>{u(s)},H=s=>{U(s.target.value),u(1)},W=async s=>{try{const a=await c.get(`http://localhost:1337/api/educational-resources/${s}`);S(a.data)}catch(a){console.error("Error fetching tutorial details:",a),l(o({id:Date.now().toString(),type:"error",message:"Failed to load tutorial details. Please try again."}))}},G=async(s,a)=>{if(!m){l(o({id:Date.now().toString(),type:"info",message:"Please log in to rate tutorials."}));return}try{await c.post(`http://localhost:1337/api/educational-resources/${s}/rate`,{rating:a}),l(o({id:Date.now().toString(),type:"success",message:"Thank you for rating this tutorial!"})),g()}catch(d){console.error("Error rating tutorial:",d),l(o({id:Date.now().toString(),type:"error",message:"Failed to submit rating. Please try again."}))}},J=async(s,a)=>{if(m)try{await c.put(`http://localhost:1337/api/educational-resources/${s}/progress`,{progress:a}),g()}catch(d){console.error("Error updating progress:",d)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`min-h-screen bg-gray-100 ${F==="dark"?"dark":""}`,children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-md",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-purple-800 dark:text-purple-400",children:"Learning Center"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(f,{type:"text",placeholder:"Search tutorials...",value:j,onChange:H,className:"pl-10 pr-4 py-2 w-64"}),e.jsx(te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18})]}),e.jsxs(n,{variant:"outline",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"})," Suggest Tutorial"]})]})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-8 flex flex-col md:flex-row",children:[e.jsx("aside",{className:"w-full md:w-64 mb-8 md:mb-0 md:mr-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 dark:text-white",children:"Filters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsxs(_,{value:h,onValueChange:q,children:[e.jsx(T,{children:e.jsx(E,{placeholder:"Select category"})}),e.jsxs(D,{children:[e.jsx(p,{value:"all",children:"All Categories"}),$.map(s=>e.jsx(p,{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Skill Level"}),e.jsxs(_,{value:x,onValueChange:Q,children:[e.jsx(T,{children:e.jsx(E,{placeholder:"Select skill level"})}),e.jsxs(D,{children:[e.jsx(p,{value:"all",children:"All Skill Levels"}),R.map(s=>e.jsx(p,{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(n,{variant:"outline",onClick:()=>{b("all"),k("all")},children:"Reset"}),e.jsx(n,{onClick:g,children:"Apply"})]})]})]})}),e.jsx("main",{className:"flex-1",children:z?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:I.map(s=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsx("img",{src:s.thumbnail||`https://picsum.photos/seed/${s.uid}/400/225`,alt:s.title,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2 dark:text-white",children:s.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:s.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx(L,{variant:"secondary",children:s.category}),e.jsx(L,{variant:"outline",children:s.skill_level})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(a=>e.jsx(re,{onClick:()=>G(s.uid,a),className:`cursor-pointer ${a<=s.rating?"text-yellow-400 fill-current":"text-gray-300"}`,size:20},a))}),e.jsx(n,{onClick:()=>W(s.uid),children:"Start Learning"})]}),m&&s.user_progress!==void 0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:e.jsx("div",{className:"bg-purple-600 h-2.5 rounded-full",style:{width:`${s.user_progress}%`}})}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.user_progress,"% complete"]})]})]})]},s.uid))}),e.jsx(Y,{className:"mt-8",children:e.jsxs(Z,{children:[i>1&&e.jsx(v,{children:e.jsx(ee,{onClick:()=>y(i-1)})}),Array.from({length:N},(s,a)=>a+1).map(s=>e.jsx(v,{children:e.jsx(se,{onClick:()=>y(s),isActive:i===s,children:s})},s)),i<N&&e.jsx(v,{children:e.jsx(ae,{onClick:()=>y(i+1)})})]})})]})})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-full overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-white",children:r.title}),r.content_type==="video"?e.jsx("div",{className:"aspect-w-16 aspect-h-9 mb-4",children:e.jsx("iframe",{src:r.content_url,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"})}):e.jsx("div",{className:"prose max-w-none mb-4 dark:text-gray-300",dangerouslySetInnerHTML:{__html:r.content}}),m&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Update Progress"}),e.jsx(f,{type:"range",min:"0",max:"100",value:r.user_progress||0,onChange:s=>J(r.uid,parseInt(s.target.value)),className:"w-full"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.user_progress||0,"% complete"]})]}),e.jsx(n,{onClick:()=>S(null),children:"Close"})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 dark:text-white",children:"Suggest a New Tutorial Topic"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),l(o({id:Date.now().toString(),type:"success",message:"Thank you for your suggestion! We'll review it shortly."}))},className:"space-y-4",children:[e.jsx(f,{type:"text",placeholder:"Tutorial title",className:"w-full",required:!0}),e.jsx("textarea",{placeholder:"Brief description of the tutorial",className:"w-full p-2 border rounded dark:bg-gray-700 dark:text-white",rows:4,required:!0}),e.jsx(n,{type:"submit",className:"bg-green-500 hover:bg-green-600",children:"Submit Suggestion"})]})]})]})})};export{_e as default};
