import{u as B,r as o,a as M,j as e,L as P,l as G,b as g,c as O,s as V}from"./index-DuCqjSN_.js";import{F as C,a as S,b as A,c as z}from"./index-GfMKUExp.js";import{B as p}from"./button-WgoBpstD.js";import{I as n}from"./input-pQHlcQ7V.js";import{L as i}from"./label-B5QIlVIG.js";import{C as U}from"./checkbox-CHt9F7Ie.js";import{P as J}from"./progress-7UfO17KA.js";import{T as W,a as X,b as k,c as T}from"./tabs-DMfJceud.js";import{R as $,a as j}from"./radio-group-D0WIHtH0.js";import{X as H}from"./x-Cy9V4xJp.js";import"./utils-bp6eTVW9.js";import"./clsx-B-dksMZM.js";import"./index-DShn9APq.js";import"./index-Rc2U_xE8.js";import"./index-WcrWcI-o.js";import"./index-C0VCPdqo.js";import"./index-DRx4Dmjp.js";import"./index-BSIiYokZ.js";const he=()=>{const x=B(),[E,u]=o.useState(!0),[N,L]=o.useState("login"),[l,f]=o.useState({email:"",password:"",rememberMe:!1}),[r,m]=o.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",userType:"individual"}),[d,v]=o.useState(!1),[c,h]=o.useState(!1),[t,R]=o.useState({}),[I,w]=o.useState(0),{auth_token:b}=M(s=>s.auth);o.useEffect(()=>{b&&u(!1)},[b]),o.useEffect(()=>{if(c){const s=setInterval(()=>{w(a=>a>=100?(clearInterval(s),100):a+10)},200);return()=>clearInterval(s)}else w(0)},[c]);const y=s=>{const a={};return s==="login"?(l.email||(a.email="Email is required"),l.password||(a.password="Password is required")):(r.firstName||(a.firstName="First name is required"),r.lastName||(a.lastName="Last name is required"),r.email||(a.email="Email is required"),r.password||(a.password="Password is required"),r.password!==r.confirmPassword&&(a.confirmPassword="Passwords do not match")),R(a),Object.keys(a).length===0},_=async s=>{if(s.preventDefault(),!!y("login")){h(!0);try{const a=await x(G({email:l.email,password:l.password}));console.log(a,"this is results data in form login"),a.payload.auth_token&&u(!1)}catch(a){x(g({id:Date.now().toString(),type:"error",message:a.response.data.message?a.response.data.message:"Login failed. Please check your credentials."}))}finally{h(!1)}}},D=async s=>{if(s.preventDefault(),!!y("register")){h(!0);try{const a=await O.post("/api/users/register",{first_name:r.firstName,last_name:r.lastName,email:r.email,password:r.password,user_type:r.userType});console.log(a,"this is response data in form registration"),x(V(a.data)),x(g({id:Date.now().toString(),type:"success",message:"Registration successful!"})),u(!1)}catch(a){x(g({id:Date.now().toString(),type:"error",message:a.response.data.message?a.response.data.message:"Registration failed. Please try again."}))}finally{h(!1)}}},F=s=>{console.log(`Social login with ${s}`)},q=()=>{console.log("Forgot password")};return E?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"overflow-auto  bg-white rounded-xl shadow-2xl w-full max-w-md p-8 relative",children:[e.jsx(J,{value:I,className:"authProgress absolute top-0 left-0 right-0 h-1"}),e.jsx("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:e.jsx(H,{size:24})}),e.jsx("h2",{className:"text-3xl font-bold text-center mb-6 font-serif text-purple-800",children:N==="login"?"Welcome Back":"Join Us"}),e.jsxs(W,{defaultValue:N,onValueChange:s=>L(s),children:[e.jsxs(X,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(k,{value:"login",children:"Login"}),e.jsx(k,{value:"register",children:"Register"})]}),e.jsx(T,{value:"login",className:"formContainer",children:e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(n,{type:"email",id:"email",value:l.email,onChange:s=>f({...l,email:s.target.value}),className:t.email?"border-red-500":""}),t.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.email})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{type:d?"text":"password",id:"password",value:l.password,onChange:s=>f({...l,password:s.target.value}),className:t.password?"border-red-500":""}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>v(!d),children:d?e.jsx(C,{}):e.jsx(S,{})})]}),t.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.password})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{id:"rememberMe",checked:l.rememberMe,onCheckedChange:s=>f({...l,rememberMe:s})}),e.jsx(i,{htmlFor:"rememberMe",className:"ml-2",children:"Remember me"})]}),e.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:underline",onClick:q,children:"Forgot Password?"})]}),e.jsx(p,{type:"submit",className:"w-full",disabled:c,children:c?"Logging in...":"Login"})]})}),e.jsx(T,{value:"register",className:"formContainer",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"firstName",children:"First Name"}),e.jsx(n,{type:"text",id:"firstName",value:r.firstName,onChange:s=>m({...r,firstName:s.target.value}),className:t.firstName?"border-red-500":""}),t.firstName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.firstName})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"lastName",children:"Last Name"}),e.jsx(n,{type:"text",id:"lastName",value:r.lastName,onChange:s=>m({...r,lastName:s.target.value}),className:t.lastName?"border-red-500":""}),t.lastName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.lastName})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"registerEmail",children:"Email"}),e.jsx(n,{type:"email",id:"registerEmail",value:r.email,onChange:s=>m({...r,email:s.target.value}),className:t.email?"border-red-500":""}),t.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.email})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"registerPassword",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{type:d?"text":"password",id:"registerPassword",value:r.password,onChange:s=>m({...r,password:s.target.value}),className:t.password?"border-red-500":""}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>v(!d),children:d?e.jsx(C,{}):e.jsx(S,{})})]}),t.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.password})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(n,{type:"password",id:"confirmPassword",value:r.confirmPassword,onChange:s=>m({...r,confirmPassword:s.target.value}),className:t.confirmPassword?"border-red-500":""}),t.confirmPassword&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.confirmPassword})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"userType",children:"User Type"}),e.jsxs($,{value:r.userType,onValueChange:s=>m({...r,userType:s}),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"individual",id:"individual"}),e.jsx(i,{htmlFor:"individual",children:"Individual"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"designer",id:"designer"}),e.jsx(i,{htmlFor:"designer",children:"Designer/Artisan"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"business",id:"business"}),e.jsx(i,{htmlFor:"business",children:"Business"})]})]})]}),e.jsx(p,{type:"submit",className:"w-full",disabled:c,children:c?"Registering...":"Register"})]})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-center text-sm text-gray-600 mb-4",children:"Or continue with"}),e.jsxs("div",{className:"flex justify-center space-x-4 socialButton",children:[e.jsxs(p,{onClick:()=>F("google"),variant:"outline",className:"flex items-center justify-center",children:[e.jsx(A,{className:"mr-2"})," Google"]}),e.jsxs(p,{onClick:()=>F("facebook"),variant:"outline",className:"flex items-center justify-center",children:[e.jsx(z,{className:"mr-2"})," Facebook"]})]})]}),e.jsxs("p",{className:"mt-6 text-center text-xs text-gray-500",children:["By continuing, you agree to our"," ",e.jsx(P,{to:"/terms",className:"text-blue-600 hover:underline",children:"Terms of Service"})," ","and"," ",e.jsx(P,{to:"/privacy",className:"text-blue-600 hover:underline",children:"Privacy Policy"}),"."]})]})}):null};export{he as default};
